// Auto-generated â€” do not edit. Source: deferred/deferred-script.ts
export const DEFERRED_SCRIPT = "\"use strict\";(()=>{function E(n,o,a,s){let i=!1;if(a===\"html\"){let e=document.querySelectorAll(`[data-pantolingo-pending=\"${n}\"]`);for(let t=0;t<e.length;t++)e[t].innerHTML=o,e[t].classList.remove(\"pantolingo-skeleton\"),e[t].removeAttribute(\"data-pantolingo-pending\"),i=!0}else if(a===\"text\"){let e=document.createTreeWalker(document.body,NodeFilter.SHOW_COMMENT,{acceptNode:r=>r.data===`pantolingo:${n}`?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}),t=[],d;for(;d=e.nextNode();)t.push(d);for(let r of t){let g=r.nextSibling;if(g&&g.nodeType===Node.TEXT_NODE){let u=g.data,T=u.match(/^(\\s*)/)?.[1]||\"\",h=u.match(/(\\s*)$/)?.[1]||\"\";g.data=T+o+h;let m=g.parentElement;m?.classList.contains(\"pantolingo-skeleton\")&&(m.classList.remove(\"pantolingo-skeleton\"),m.removeAttribute(\"data-pantolingo-pending\")),r.remove(),i=!0}}let c=document.querySelectorAll(`[data-pantolingo-pending=\"${n}\"]:not(title)`);for(let r=0;r<c.length;r++)c[r].classList.remove(\"pantolingo-skeleton\"),c[r].removeAttribute(\"data-pantolingo-pending\"),i=!0;let l=document.querySelector(`title[data-pantolingo-pending=\"${n}\"]`);l&&(l.textContent=o,l.removeAttribute(\"data-pantolingo-pending\"),i=!0)}else if(a===\"attr\"&&s){let e=document.querySelectorAll(`[data-pantolingo-pending=\"${n}\"][data-pantolingo-attr=\"${s}\"]`);for(let t=0;t<e.length;t++)e[t].setAttribute(s,o),e[t].removeAttribute(\"data-pantolingo-pending\"),e[t].removeAttribute(\"data-pantolingo-attr\"),i=!0}return i}function f(n){let{hash:o,kind:a,attr:s}=n;if(a===\"html\"){let i=document.querySelectorAll(`[data-pantolingo-pending=\"${o}\"]`);for(let e=0;e<i.length;e++)i[e].classList.remove(\"pantolingo-skeleton\"),i[e].removeAttribute(\"data-pantolingo-pending\")}else if(a===\"text\"){let i=document.createTreeWalker(document.body,NodeFilter.SHOW_COMMENT,{acceptNode:l=>l.data===`pantolingo:${o}`?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}),e=[],t;for(;t=i.nextNode();)e.push(t);for(let l of e){let r=l.parentElement;r?.classList.contains(\"pantolingo-skeleton\")&&(r.classList.remove(\"pantolingo-skeleton\"),r.removeAttribute(\"data-pantolingo-pending\")),l.remove()}let d=document.querySelectorAll(`[data-pantolingo-pending=\"${o}\"]:not(title)`);for(let l=0;l<d.length;l++)d[l].classList.remove(\"pantolingo-skeleton\"),d[l].removeAttribute(\"data-pantolingo-pending\");let c=document.querySelector(`title[data-pantolingo-pending=\"${o}\"]`);c&&c.removeAttribute(\"data-pantolingo-pending\")}else if(a===\"attr\"&&s){let i=document.querySelectorAll(`[data-pantolingo-pending=\"${o}\"][data-pantolingo-attr=\"${s}\"]`);for(let e=0;e<i.length;e++)i[e].removeAttribute(\"data-pantolingo-pending\"),i[e].removeAttribute(\"data-pantolingo-attr\")}}function L(){let n=document.querySelectorAll(\".pantolingo-skeleton\");for(let o=0;o<n.length;o++)n[o].classList.remove(\"pantolingo-skeleton\"),n[o].removeAttribute(\"data-pantolingo-pending\")}async function p(n,o){if(n.length===0||o>=10){for(let a of n)f(a);L();return}try{let a={segments:n.map(t=>({hash:t.hash,kind:t.kind,content:t.content,...t.attr?{attr:t.attr}:{}}))},s=await fetch(\"/__pantolingo/translate\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(a)});if(!s.ok)throw new Error(`HTTP ${s.status}`);let i=await s.json(),e=[];for(let t of n){let d=i[t.hash];d!==void 0?E(t.hash,d,t.kind,t.attr)||f(t):e.push(t)}e.length>0?setTimeout(()=>{p(e,o+1)},1e3):L()}catch(a){console.error(\"[Pantolingo] Polling error:\",a),setTimeout(()=>{p(n,o+1)},1e3)}}function A(){let n=window.__PANTOLINGO_DEFERRED__;!n||n.length===0||setTimeout(()=>{p([...n],0)},1e3)}document.readyState===\"loading\"?document.addEventListener(\"DOMContentLoaded\",A):A();})();"
